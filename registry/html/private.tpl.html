<!DOCTYPE html>

<head>
    <title>Pagina di @MATRICOLA@</title>
    <meta charset="utf-8" />
</head>

<body>
    <h2>Ciao @NOME@ @COGNOME@! - <a href="/logout">Logout</a></h2>
    <p>Questa e' la tua pagina personale, in cui puoi gestire i tuoi dati.</p>

    <h3>Dati personali</h3>
    <form id="Name" method="post">
        <b>Nome</b>:
        <input type="text" name="name" id="name" pattern="^[A-Za-z\'\- ]+$"
        size="23" title="Qui puoi modificare il tuo nome" required/>
        <input type="submit" value="Modifica" />
    </form>
    <ul>
        <li>
            <div id="zoneName">@NOME@</div>
            <div id="infoName"></div>
        </li>
    </ul>

    <form id="Surname" method="post">
        <b>Cognome</b>:
        <input type="text" name="surname" id="surname" pattern="^[A-Za-z\'\- ]+$"
        size="23" title="Qui puoi modificare il tuo cognome" required/>
        <input type="submit" value="Modifica" />
    </form>
    <ul>
        <li>
            <div id="zoneSurname">@COGNOME@</div>
            <div id="infoSurname"></div>
        </li>
    </ul>


    <b>Matricola</b>: @MATRICOLA@
    <br /><br />

    <h3>Dati funzionali al corso</h3>
    <form id="UrlBlog" method="post">
        <b>Url blog</b>:
        <input type="text" name="blog" id="blog" pattern="^http(|s)\://.*$"
        size="42" title="Inserisci l'url del tuo blog" required/>
        <input type="submit" value="Modifica" /> <small>es. http://www.example.com</small>
    </form>
    <ul>
        <li>
            <div id="zoneBlog">@BLOG@</div>
            <div id="infoBlog"></div>
        </li>
    </ul>
    <br>

    <form id="AccountTwitter" method="post">
        <b>Account Twitter</b>:
        <input type="text" name="twitter" id="twitter"
        pattern="^@[A-Za-z0-9_]{1,15}$" title="Inserisci il tuo handle Twitter"
        required/>
        <input type="submit" value="Modifica" /> <small>es. @NickTwitter</small>
    </form>
    <ul>
        <li>
            <div id="zoneTwitter">@TWITTER@</div>
            <div id="infoTwitter"></div>
        </li>
    </ul>
    <br>

    <form id="AccountWP" method="post">
        <b>Account Wikipedia</b>:
        <input type="text" name="wp" id="wp" pattern="^(|(U|u)tente\:[^\{\}\[\]\#\|\<\>][^\{\}\[\]\#\|\<\>]+)$"
        title="Inserisci il tuo nome utente su Wikipedia preceduto da Utente:"
        required/>
        <input type="submit" value="Modifica" /> <small>es. Utente:MioNickname</small>
    </form>
    <ul>
        <li>
            <div id="zoneWP">@WIKIPEDIA@</div>
            <div id="infoWP"></div>
        </li>
    </ul>
    <br>

    <form id="UrlVideo" method="post">
        <b>Url video presentazione</b>:
        <input type="text" name="video"
        id="video" pattern="^http(|s)\://.*$" size="42" title="Inserisci l'url del tuo video di presentazione"
        required/>
        <input type="submit" value="Modifica" /> <small>es. https://www.youtube.com/watch?v=aui6NoM56_k</small>
    </form>
    <ul>
        <li>
            <div id="zoneVideo">@VIDEO@</div>
            <div id="infoVideo"></div>
        </li>
    </ul>
    <br>

    <form id="Post1" method="post">
        <b>Post n°1</b>:
        <input type="text" name="post1"
        id="post1" pattern="^http(|s)\://.*$" size="42" title="Inserisci l'url del tuo primo post"
        required/>
        <input type="submit" value="Modifica" /> <small>es. http://mioblog.tumblr.com/primo-post</small>
    </form>
    <ul>
        <li>
            <div id="zonePost1">@POST1@</div>
            <div id="infoPost1"></div>
        </li>
    </ul>
    <br>

    <form id="Post2" method="post">
        <b>Post n°2</b>:
        <input type="text" name="post2"
        id="post2" pattern="^http(|s)\://.*$" size="42" title="Inserisci l'url del tuo primo post"
        required/>
        <input type="submit" value="Modifica" /> <small>es. http://mioblog.tumblr.com/secondo-post</small>
    </form>
    <ul>
        <li>
            <div id="zonePost2">@POST2@</div>
            <div id="infoPost2"></div>
        </li>
    </ul>
    <br>

    <form id="Post3" method="post">
        <b>Post n°3</b>:
        <input type="text" name="post3"
        id="post3" pattern="^http(|s)\://.*$" size="42" title="Inserisci l'url del tuo primo post"
        required/>
        <input type="submit" value="Modifica" /> <small>es. http://mioblog.tumblr.com/terzo-post</small>
    </form>
    <ul>
        <li>
            <div id="zonePost3">@POST3@</div>
            <div id="infoPost3"></div>
        </li>
    </ul>

    <br>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>

    <script type="text/javascript">
        if ($("#zoneBlog").is(":empty")) {
            document.getElementById("zoneBlog").innerHTML = "Url blog non presente.";
        }
        if ($("#zoneTwitter").is(":empty")) {
            document.getElementById("zoneTwitter").innerHTML = "Account Twitter non presente.";
        }
        if ($("#zoneWP").is(":empty")) {
            document.getElementById("zoneWP").innerHTML = "Account Wikipedia non presente.";
        }
        if ($("#zoneVideo").is(":empty")) {
            document.getElementById("zoneVideo").innerHTML = "Url video non presente.";
        }
        if ((document.getElementById("zonePost1").innerHTML === "undefined") || ($("#zonePost1").is(":empty"))) {
            document.getElementById("zonePost1").innerHTML = "Url del primo post non presente.";
        }
        if ((document.getElementById("zonePost2").innerHTML === "undefined") || ($("#zonePost2").is(":empty"))){
            document.getElementById("zonePost2").innerHTML = "Url del secondo post non presente.";
        }
        if ((document.getElementById("zonePost3").innerHTML === "undefined") || ($("#zonePost3").is(":empty"))){
            document.getElementById("zonePost3").innerHTML = "Url del terzo post non presente.";
        }
    </script>

    <script type="text/javascript">
        $("#AccountWP").bind("submit", function (evt) {
            var matricola = "@MATRICOLA@";
            var wikipedia = $("#wp").val();
            $.ajax({
                url: "/mod_sent",
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify({
                    Matricola: matricola,
                    Wikipedia: wikipedia
                }),
                success: function (data, textStatus, jqXHR) {
                    $("#zoneWP").text(data.Wikipedia);
                    $("#infoWP").html("<b>Modificato!</b>");
                },
                error: function (jqXHR, textStatus,
                    errorThrown) {
                    $("#infoWP").html(
                        "<b>Si e' verificato un errore.</b>");
                }
            });
            return false;
        });


        $("#UrlBlog").bind("submit", function (evt) {
            var matricola = "@MATRICOLA@";
            var blog = $("#blog").val();
            $.ajax({
                url: "/mod_sent",
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify({
                    Matricola: matricola,
                    Blog: blog
                }),
                success: function (data, textStatus, jqXHR) {
                    $("#zoneBlog").text(data.Blog);
                    $("#infoBlog").html("<b>Modificato!</b>");
                },
                error: function (jqXHR, textStatus,
                    errorThrown) {
                    $("#infoBlog").html(
                        "<b>Si e' verificato un errore.</b>");
                }
            });
            return false;
        });


        $("#AccountTwitter").bind("submit", function (evt) {
            var matricola = "@MATRICOLA@";
            var twitter = $("#twitter").val();
            $.ajax({
                url: "/mod_sent",
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify({
                    Matricola: matricola,
                    Twitter: twitter
                }),
                success: function (data, textStatus, jqXHR) {
                    $("#zoneTwitter").text(data.Twitter);
                    $("#infoTwitter").html("<b>Modificato!</b>");
                },
                error: function (jqXHR, textStatus,
                    errorThrown) {
                    $("#infoTwitter").html(
                        "<b>Si e' verificato un errore.</b>");
                }
            });
            return false;
        });


        $("#UrlVideo").bind("submit", function (evt) {
            var matricola = "@MATRICOLA@";
            var video = $("#video").val();
            $.ajax({
                url: "/mod_sent",
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify({
                    Matricola: matricola,
                    Video: video
                }),
                success: function (data, textStatus, jqXHR) {
                    $("#zoneVideo").text(data.Video);
                    $("#infoVideo").html("<b>Modificato!</b>");
                },
                error: function (jqXHR, textStatus,
                    errorThrown) {
                    $("#infoVideo").html(
                        "<b>Si e' verificato un errore.</b>");
                }
            });
            return false;
        });

        $("#Post1").bind("submit", function (evt) {
            var matricola = "@MATRICOLA@";
            var post1 = $("#post1").val();
            $.ajax({
                url: "/mod_sent",
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify({
                    Matricola: matricola,
                    Post1: post1
                }),
                success: function (data, textStatus, jqXHR) {
                    $("#zonePost1").text(data.Post1);
                    $("#infoPost1").html("<b>Modificato!</b>");
                },
                error: function (jqXHR, textStatus,
                    errorThrown) {
                    $("#infoPost1").html(
                        "<b>Si e' verificato un errore.</b>");
                }
            });
            return false;
        });

        $("#Post2").bind("submit", function (evt) {
            var matricola = "@MATRICOLA@";
            var post2 = $("#post2").val();
            $.ajax({
                url: "/mod_sent",
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify({
                    Matricola: matricola,
                    Post2: post2
                }),
                success: function (data, textStatus, jqXHR) {
                    $("#zonePost2").text(data.Post2);
                    $("#infoPost2").html("<b>Modificato!</b>");
                },
                error: function (jqXHR, textStatus,
                    errorThrown) {
                    $("#infoPost2").html(
                        "<b>Si e' verificato un errore.</b>");
                }
            });
            return false;
        });

        $("#Post3").bind("submit", function (evt) {
            var matricola = "@MATRICOLA@";
            var post3 = $("#post3").val();
            $.ajax({
                url: "/mod_sent",
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify({
                    Matricola: matricola,
                    Post3: post3
                }),
                success: function (data, textStatus, jqXHR) {
                    $("#zonePost3").text(data.Post3);
                    $("#infoPost3").html("<b>Modificato!</b>");
                },
                error: function (jqXHR, textStatus,
                    errorThrown) {
                    $("#infoPost3").html(
                        "<b>Si e' verificato un errore.</b>");
                }
            });
            return false;
        });

        $("#Name").bind("submit", function (evt) {
            var matricola = "@MATRICOLA@";
            var nome = $("#name").val();
            $.ajax({
                url: "/mod_sent",
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify({
                    Matricola: matricola,
                    Nome: nome
                }),
                success: function (data, textStatus, jqXHR) {
                    $("#zoneName").text(data.Nome);
                    $("#infoName").html("<b>Modificato!</b>");
                },
                error: function (jqXHR, textStatus,
                    errorThrown) {
                    $("#infoName").html(
                        "<b>Si e' verificato un errore.</b>");
                }
            });
            return false;
        });

        $("#Surname").bind("submit", function (evt) {
            var matricola = "@MATRICOLA@";
            var cognome = $("#surname").val();
            $.ajax({
                url: "/mod_sent",
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify({
                    Matricola: matricola,
                    Cognome: cognome
                }),
                success: function (data, textStatus, jqXHR) {
                    $("#zoneSurname").text(data.Cognome);
                    $("#infoSurname").html("<b>Modificato!</b>");
                },
                error: function (jqXHR, textStatus,
                    errorThrown) {
                    $("#infoSurname").html(
                        "<b>Si e' verificato un errore.</b>");
                }
            });
            return false;
        });

    </script>

</body>

</html>
